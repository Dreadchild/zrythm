#
#  Copyright (C) 2018-2019 Alexandros Theodotou
#
#  This file is part of Zrythm
#
#  Zrythm is free software: you can redistribute it and/or modify
#  it under the terms of the GNU General Public License as published by
#  the Free Software Foundation, either version 3 of the License, or
#  (at your option) any later version.
#
#  Zrythm is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU General Public License for more details.
#
#  You should have received a copy of the GNU General Public License
#  along with Zrythm.  If not, see <https://www.gnu.org/licenses/>.
#

Summary: A free GNU/Linux Digital Audio Workstation (DAW) focused on electronic music and high modularity.
Name: zrythm
Version: @BRANCH@
Release: 1%{?dist}
License: GPLv3+
URL: https://www.zrythm.org
Group: System Environment/Base
Source0: https://gitlab.com/alextee/zrythm/-/archive/@BRANCH@/zrythm-@BRANCH@.tar.gz

BuildRequires: libxml2-devel
BuildRequires: gtk3-devel
BuildRequires: jack-audio-connection-kit-devel
BuildRequires: lilv-devel
BuildRequires: autoconf
BuildRequires: lv2-devel
BuildRequires: libdazzle-devel
BuildRequires: libsndfile-devel
BuildRequires: libyaml-devel
BuildRequires: libsmf-devel
BuildRequires: portaudio-devel
BuildRequires: autoconf
BuildRequires: automake
BuildRequires: gcc
BuildRequires: pkgconfig
#BuildRequires: ffmpeg-devel
Requires: libxml2
Requires: gtk3
Requires: jack-audio-connection-kit
Requires: lilv
Requires: lv2
Requires: libdazzle
Requires: libyaml
Requires: libsmf
Requires: libsndfile
Requires: portaudio
Requires: breeze-icon-theme
#Requires: ffmpeg

BuildRoot: ~/rpmbuild/

%description
Zrythm is a free modern music production system, also known
as DAW. It aims to be highly modular, meaning everything
should be automatable and inter-connectable, making it
suitable for electronic music.

It is written in C and it uses the GTK+3 toolkit. Bits and
pieces are taken from other programs like Ardour and Jalv.

More info at https://www.zrythm.org

%prep
%setup -q

%build
./autogen.sh
%configure --enable-package-mode --enable-release
%{__make} %{?_smp_mflags}

%install
%{__rm} -rf $RPM_BUILD_ROOT
%{__make} install DESTDIR=$RPM_BUILD_ROOT

%clean
%{__rm} -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root)
%doc README.md CONTRIBUTING.md INSTALL.md
%{_bindir}/*
%{_datadir}/*

%changelog
* Thu Jan 17 2019 Alexandros Theodotou <alex@alextee.org>
- RPM release
